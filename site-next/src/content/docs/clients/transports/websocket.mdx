---
title: WebSocket Transport
description: Persistent connection to Ethereum nodes for real-time subscriptions
---

The WebSocket transport provides a persistent connection to Ethereum nodes, enabling real-time subscriptions and lower latency for high-frequency requests.

The `transport.WebSocket(...)` function returns a `transport.TransportFactory` that you pass into a client config (e.g. `client.PublicClientConfig`).

### Import

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `import (
    "github.com/ChefBingbong/viem-go/client"
    "github.com/ChefBingbong/viem-go/client/transport"
)`,
      showLineNumbers: false
    }
  ]}
/>

These are the most common imports for using the WebSocket transport:

- **transport**: WebSocket transport factory and config types (e.g. `transport.WebSocket`, `transport.WebSocketTransportConfig`).
- **client**: Client constructors/config (e.g. `client.CreatePublicClient`, `client.PublicClientConfig`).

### Go notes

#### Transport factories

`transport.WebSocket(...)` creates a factory, not an immediate connection. The client constructs the transport internally when you create the client.

#### Closing the client

Close the client when you're done: `defer publicClient.Close()`. This closes the underlying WebSocket connection.

### Usage

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Transport: transport.WebSocket("wss://eth.llamarpc.com"), // [!code focus]
})
if err != nil {
    log.Fatal(err)
}
defer publicClient.Close()`,
      showLineNumbers: false
    },
    {
      title: "viem",
      language: "ts",
      code: `const publicClient = createPublicClient({
  transport: webSocket('wss://eth.llamarpc.com'), // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### Subscriptions (brief)

WebSocket transports support JSON-RPC subscriptions via `eth_subscribe`.

On a `PublicClient`, watch actions can choose between polling and subscriptions based on the transport type. See [Public Client](/docs/clients/public/).

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `sub, err := publicClient.Subscribe(
    transport.NewHeadsSubscribeParams(), // [!code focus]
    func(data json.RawMessage) {
        // ...
    },
    func(err error) {
        // ...
    },
)
if err != nil {
    log.Fatal(err)
}
defer sub.Unsubscribe()`,
      showLineNumbers: false
    }
  ]}
/>

### Parameters

### URL

- **Type:** `string`
- **Optional**

The WebSocket RPC endpoint URL.

URL resolution order is:
- **Function argument**: `transport.WebSocket(\"wss://...\")`
- **Config**: `transport.WebSocket(\"\", transport.WebSocketTransportConfig{ URL: \"wss://...\" })`
- **Chain default**: `params.Chain.RpcUrls[\"default\"].WebSocket[0]` (when a client provides a chain)

If no URL can be resolved, client creation fails with `transport.ErrURLRequired`.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com") // [!code focus]

publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Transport: tr,
})`,
      showLineNumbers: false
    }
  ]}
/>

### Timeout

- **Type:** `time.Duration`
- **Default:** `10s`
- **Optional**

Request timeout for each JSON-RPC call.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    Timeout: 5 * time.Second, // [!code focus]
})

publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Transport: tr,
})`,
      showLineNumbers: false
    }
  ]}
/>

### RetryCount

- **Type:** `int`
- **Default:** `3`
- **Optional**

Maximum number of retry attempts for retryable errors.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    RetryCount: 5, // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### RetryDelay

- **Type:** `time.Duration`
- **Default:** `150ms`
- **Optional**

Base delay between retries. Retries use exponential backoff \(delay * 2^attempt\).

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    RetryDelay: 250 * time.Millisecond, // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### KeepAlive

- **Type:** `*transport.KeepAliveConfig`
- **Default:** `{ Enabled: true, Interval: 30s }`
- **Optional**

Keep-alive ping configuration.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    KeepAlive: &transport.KeepAliveConfig{ // [!code focus:4]
        Enabled:  true,
        Interval: 30 * time.Second,
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### KeepAlive.Enabled

- **Type:** `bool`
- **Default:** `true`
- **Optional**

Whether keep-alive pings are enabled.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    KeepAlive: &transport.KeepAliveConfig{
        Enabled: false, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### KeepAlive.Interval

- **Type:** `time.Duration`
- **Default:** `30s`
- **Optional**

Interval between keep-alive pings.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    KeepAlive: &transport.KeepAliveConfig{
        Enabled:  true,
        Interval: 10 * time.Second, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Reconnect

- **Type:** `*transport.ReconnectConfig`
- **Default:** `{ Enabled: true, MaxAttempts: 5, Delay: 2s }`
- **Optional**

Automatic reconnection configuration.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    Reconnect: &transport.ReconnectConfig{ // [!code focus:5]
        Enabled:     true,
        MaxAttempts: 5,
        Delay:       2 * time.Second,
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Reconnect.Enabled

- **Type:** `bool`
- **Default:** `true`
- **Optional**

Whether reconnection is enabled.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    Reconnect: &transport.ReconnectConfig{
        Enabled: false, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Reconnect.MaxAttempts

- **Type:** `int`
- **Default:** `5`
- **Optional**

Maximum reconnection attempts.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    Reconnect: &transport.ReconnectConfig{
        Enabled:     true,
        MaxAttempts: 10, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Reconnect.Delay

- **Type:** `time.Duration`
- **Default:** `2s`
- **Optional**

Delay between reconnection attempts.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    Reconnect: &transport.ReconnectConfig{
        Enabled: true,
        Delay:   5 * time.Second, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Methods

- **Type:** `*transport.MethodFilter`
- **Optional**

Restrict which JSON-RPC methods can be called by this transport.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    Methods: &transport.MethodFilter{ // [!code focus:5]
        Include: []string{"eth_subscribe", "eth_unsubscribe"},
        Exclude: []string{"eth_sendTransaction"},
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Methods.Include

- **Type:** `[]string`
- **Optional**

If set, only methods in `Include` are allowed (except those blocked by `Exclude`).

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    Methods: &transport.MethodFilter{
        Include: []string{"eth_subscribe", "eth_unsubscribe"}, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Methods.Exclude

- **Type:** `[]string`
- **Optional**

Methods to block (checked before `Include`).

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    Methods: &transport.MethodFilter{
        Exclude: []string{"eth_sendTransaction", "eth_sendRawTransaction"}, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Key

- **Type:** `string`
- **Default:** `"webSocket"`
- **Optional**

Transport identifier key.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    Key: "foo", // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### Name

- **Type:** `string`
- **Default:** `"WebSocket JSON-RPC"`
- **Optional**

Human-readable transport name.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.WebSocket("wss://eth.llamarpc.com", transport.WebSocketTransportConfig{
    Name: "Foo WebSocket Transport", // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### Return Type

`transport.WebSocket(...)` returns a `transport.TransportFactory`.
