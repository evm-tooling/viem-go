---
title: HTTP Transport
description: Connect to Ethereum nodes via standard JSON-RPC over HTTP/HTTPS
---

The HTTP transport connects to Ethereum nodes via standard JSON-RPC over HTTP/HTTPS. It's the most common transport type.

The `transport.HTTP(...)` function returns a `transport.TransportFactory` that you pass into a client config (e.g. `client.PublicClientConfig` or `client.WalletClientConfig`).

### Import

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `import (
    "github.com/ChefBingbong/viem-go/client"
    "github.com/ChefBingbong/viem-go/client/transport"
)`,
      showLineNumbers: false
    }
  ]}
/>

These are the most common imports for using the HTTP transport:

- **transport**: HTTP transport factory and config types (e.g. `transport.HTTP`, `transport.HTTPTransportConfig`).
- **client**: Client constructors/config (e.g. `client.CreatePublicClient`, `client.PublicClientConfig`).

### Go notes

#### Transport factories

`transport.HTTP(...)` creates a factory, not an immediate connection. The client constructs the transport internally when you create the client.

#### Closing the client

Close the client when you're done: `defer publicClient.Close()`. This closes the underlying transport (and any batch scheduler if enabled).

### Usage

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Transport: transport.HTTP("https://eth.llamarpc.com"), // [!code focus]
})
if err != nil {
    log.Fatal(err)
}
defer publicClient.Close()`,
      showLineNumbers: false
    },
    {
      title: "viem",
      language: "ts",
      code: `const publicClient = createPublicClient({
  transport: http('https://eth.llamarpc.com'), // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### Parameters

### URL

- **Type:** `string`
- **Optional**

The RPC endpoint URL.

URL resolution order is:
- **Function argument**: `transport.HTTP(\"https://...\")`
- **Config**: `transport.HTTP(\"\", transport.HTTPTransportConfig{ URL: \"https://...\" })`
- **Chain default**: `params.Chain.RpcUrls[\"default\"].HTTP[0]` (when a client provides a chain)

If no URL can be resolved, client creation fails with `transport.ErrURLRequired`.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com") // [!code focus]

publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Transport: tr,
})`,
      showLineNumbers: false
    }
  ]}
/>

### Timeout

- **Type:** `time.Duration`
- **Default:** `10s`
- **Optional**

Request timeout for each JSON-RPC call.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Timeout: 5 * time.Second, // [!code focus]
})

publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Transport: tr,
})`,
      showLineNumbers: false
    }
  ]}
/>

### RetryCount

- **Type:** `int`
- **Default:** `3`
- **Optional**

Maximum number of retry attempts for retryable errors.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    RetryCount: 5, // [!code focus]
})

publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Transport: tr,
})`,
      showLineNumbers: false
    }
  ]}
/>

### RetryDelay

- **Type:** `time.Duration`
- **Default:** `150ms`
- **Optional**

Base delay between retries. Retries use exponential backoff \(delay * 2^attempt\).

If a `Retry-After` header is present on an HTTP error, it will be used when possible.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    RetryDelay: 250 * time.Millisecond, // [!code focus]
})

publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Transport: tr,
})`,
      showLineNumbers: false
    }
  ]}
/>

### Headers

- **Type:** `map[string]string`
- **Optional**

Additional HTTP headers to include in requests (e.g. for authenticated endpoints).

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Headers: map[string]string{ // [!code focus:4]
        "Authorization": "Bearer YOUR_API_KEY",
    },
})

publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Transport: tr,
})`,
      showLineNumbers: false
    }
  ]}
/>

### Batch

- **Type:** `*transport.BatchConfig`
- **Optional**

Enables JSON-RPC request batching at the transport layer.

When enabled, concurrent requests may be grouped into a single HTTP request.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Batch: &transport.BatchConfig{ // [!code focus:5]
        Enabled:   true,
        BatchSize: 1000,
        Wait:      10 * time.Millisecond,
    },
})

publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Transport: tr,
})`,
      showLineNumbers: false
    }
  ]}
/>

### Batch.Enabled

- **Type:** `bool`
- **Default:** `false`
- **Optional**

Whether batching is enabled.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Batch: &transport.BatchConfig{
        Enabled: true, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Batch.BatchSize

- **Type:** `int`
- **Default:** `1000`
- **Optional**

Maximum number of requests per batch. If `0`, viem-go defaults it to `1000`.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Batch: &transport.BatchConfig{
        Enabled:   true,
        BatchSize: 500, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Batch.Wait

- **Type:** `time.Duration`
- **Optional**

Maximum time to wait before sending a batch (gives more time for concurrent requests to coalesce).

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Batch: &transport.BatchConfig{
        Enabled: true,
        Wait:    10 * time.Millisecond, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Methods

- **Type:** `*transport.MethodFilter`
- **Optional**

Restrict which JSON-RPC methods can be called by this transport.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Methods: &transport.MethodFilter{ // [!code focus:5]
        Include: []string{"eth_blockNumber", "eth_getBalance"},
        Exclude: []string{"eth_sendTransaction"},
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Methods.Include

- **Type:** `[]string`
- **Optional**

If set, only methods in `Include` are allowed (except those blocked by `Exclude`).

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Methods: &transport.MethodFilter{
        Include: []string{"eth_blockNumber", "eth_getBalance"}, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Methods.Exclude

- **Type:** `[]string`
- **Optional**

Methods to block (checked before `Include`).

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Methods: &transport.MethodFilter{
        Exclude: []string{"eth_sendTransaction", "eth_sendRawTransaction"}, // [!code focus]
    },
})`,
      showLineNumbers: false
    }
  ]}
/>

### Raw

- **Type:** `bool`
- **Default:** `false`
- **Optional**

When enabled, RPC error responses are returned as `(*transport.RPCResponse, nil)` instead of being wrapped into an error.

This can be useful if you want to inspect `resp.Error` yourself.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Raw: true, // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### OnRequest

- **Type:** `func(req any) error`
- **Optional**

Hook invoked before each request.

<Aside type="note">
<span>This field exists on `HTTPTransportConfig`, but it is not currently invoked by the transport implementation.</span>
</Aside>

### OnResponse

- **Type:** `func(resp any) error`
- **Optional**

Hook invoked after each response.

<Aside type="note">
<span>This field exists on `HTTPTransportConfig`, but it is not currently invoked by the transport implementation.</span>
</Aside>

### Key

- **Type:** `string`
- **Default:** `"http"`
- **Optional**

Transport identifier key.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Key: "foo", // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### Name

- **Type:** `string`
- **Default:** `"HTTP JSON-RPC"`
- **Optional**

Human-readable transport name.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `tr := transport.HTTP("https://eth.llamarpc.com", transport.HTTPTransportConfig{
    Name: "Foo HTTP Transport", // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### Return Type

`transport.HTTP(...)` returns a `transport.TransportFactory`.
