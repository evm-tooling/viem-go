---
title: estimateContractGas
description: Estimates the gas required to successfully execute a contract write function call
---

Estimates the gas required to successfully execute a contract write function call.

Internally, this uses the `EstimateGas` action with ABI-encoded calldata.

### Import

Import the public actions package so you can call this action.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `import "github.com/ChefBingbong/viem-go/actions/public"`,
      showLineNumbers: false
    }
  ]}
/>

### Usage

An example showing how to estimate gas for a specific contract write function using its ABI.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `import (
    "context"
    "log"
    "math/big"

    "github.com/ethereum/go-ethereum/common"
    "github.com/ChefBingbong/viem-go/actions/public"
    "github.com/ChefBingbong/viem-go/abi"
    "github.com/ChefBingbong/viem-go/client"
    "github.com/ChefBingbong/viem-go/client/transport"
    "github.com/ChefBingbong/viem-go/chain/definitions"
)

ctx := context.Background()

publicClient, err := client.CreatePublicClient(client.PublicClientConfig{
    Chain:     definitions.Mainnet,
    Transport: transport.HTTP("https://eth.llamarpc.com"),
})
if err != nil {
    log.Fatal(err)
}
defer func() { _ = publicClient.Close() }()

// Parse ERC20 ABI
erc20ABI, err := abi.ParseABI(\`[{"inputs":[{"name":"to","type":"address"},{"name":"amount","type":"uint256"}],"name":"transfer","outputs":[],"type":"function"}]\`)
if err != nil {
    log.Fatal(err)
}

tokenAddr := common.HexToAddress("0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48")
senderAddr := common.HexToAddress("0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266")
recipientAddr := common.HexToAddress("0x70997970c51812dc3a010c7d01b50e0d17dc79c8")

gas, err := public.EstimateContractGas(ctx, publicClient, public.EstimateContractGasParameters{
    Account:      &senderAddr, // [!code focus]
    Address:      tokenAddr, // [!code focus]
    ABI:          erc20ABI, // [!code focus]
    FunctionName: "transfer", // [!code focus]
    Args:         []any{recipientAddr, big.NewInt(1000000)}, // [!code focus]
})
if err != nil {
    log.Fatal(err)
}
log.Printf("Estimated gas: %d", gas)`,
      showLineNumbers: false
    },
    {
      title: "viem",
      language: "ts",
      code: `const gas = await publicClient.estimateContractGas({
  account,
  address: tokenAddress,
  abi: erc20ABI,
  functionName: 'transfer',
  args: [recipientAddress, 1000000n],
})`,
      showLineNumbers: false
    }
  ]}
/>

### Returns

`uint64`

The estimated gas amount in units of gas.

### Parameters

Configuration options accepted by this action.

### Address

- **Type:** `common.Address`
- **Required**

The contract address.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `import (
    "github.com/ethereum/go-ethereum/common"
    "github.com/ChefBingbong/viem-go/actions/public"
)

tokenAddr := common.HexToAddress("0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48")
gas, err := public.EstimateContractGas(ctx, publicClient, public.EstimateContractGasParameters{
    Address:      tokenAddr, // [!code focus]
    ABI:          erc20ABI,
    FunctionName: "transfer",
    Args:         []any{recipientAddr, big.NewInt(1000000)},
})`,
      showLineNumbers: false
    }
  ]}
/>

### ABI

- **Type:** `*abi.ABI`
- **Required**

The contract ABI.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `import "github.com/ChefBingbong/viem-go/abi"

erc20ABI, err := abi.ParseABI(\`[{"inputs":[...],"name":"transfer",...}]\`)
gas, err := public.EstimateContractGas(ctx, publicClient, public.EstimateContractGasParameters{
    Address:      tokenAddr,
    ABI:          erc20ABI, // [!code focus]
    FunctionName: "transfer",
    Args:         []any{recipientAddr, big.NewInt(1000000)},
})`,
      showLineNumbers: false
    }
  ]}
/>

### FunctionName

- **Type:** `string`
- **Required**

The name of the function to call.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `gas, err := public.EstimateContractGas(ctx, publicClient, public.EstimateContractGasParameters{
    Address:      tokenAddr,
    ABI:          erc20ABI,
    FunctionName: "transfer", // [!code focus]
    Args:         []any{recipientAddr, big.NewInt(1000000)},
})`,
      showLineNumbers: false
    }
  ]}
/>

### Args

- **Type:** `[]any`
- **Optional**

The function arguments.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `import "math/big"

gas, err := public.EstimateContractGas(ctx, publicClient, public.EstimateContractGasParameters{
    Address:      tokenAddr,
    ABI:          erc20ABI,
    FunctionName: "transfer",
    Args:         []any{recipientAddr, big.NewInt(1000000)}, // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### Account

- **Type:** `*common.Address`
- **Optional**

The account attached to the call (msg.sender).

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `senderAddr := common.HexToAddress("0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266")
gas, err := public.EstimateContractGas(ctx, publicClient, public.EstimateContractGasParameters{
    Account:      &senderAddr, // [!code focus]
    Address:      tokenAddr,
    ABI:          erc20ABI,
    FunctionName: "transfer",
    Args:         []any{recipientAddr, big.NewInt(1000000)},
})`,
      showLineNumbers: false
    }
  ]}
/>

### Value

- **Type:** `*big.Int`
- **Optional**

The amount of wei to send with the call.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `import "math/big"

gas, err := public.EstimateContractGas(ctx, publicClient, public.EstimateContractGasParameters{
    Address:      tokenAddr,
    ABI:          erc20ABI,
    FunctionName: "transfer",
    Args:         []any{recipientAddr, big.NewInt(1000000)},
    Value:        big.NewInt(1000000000000000000), // 1 ETH // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### BlockNumber

- **Type:** `*uint64`
- **Optional**

The block number to estimate at.

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `blockNum := uint64(12345)
gas, err := public.EstimateContractGas(ctx, publicClient, public.EstimateContractGasParameters{
    Address:     tokenAddr,
    ABI:         erc20ABI,
    FunctionName: "transfer",
    Args:        []any{recipientAddr, big.NewInt(1000000)},
    BlockNumber: &blockNum, // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### BlockTag

- **Type:** `BlockTag`
- **Optional**

The block tag to estimate at (e.g., "latest", "pending").

<CodeGroup
  tabs={[
    {
      title: "Go",
      language: "go",
      code: `gas, err := public.EstimateContractGas(ctx, publicClient, public.EstimateContractGasParameters{
    Address:     tokenAddr,
    ABI:         erc20ABI,
    FunctionName: "transfer",
    Args:        []any{recipientAddr, big.NewInt(1000000)},
    BlockTag:    public.BlockTagSafe, // [!code focus]
})`,
      showLineNumbers: false
    }
  ]}
/>

### StateOverride

- **Type:** `types.StateOverride`
- **Optional**

State overrides for the estimation.

### DataSuffix

- **Type:** `[]byte`
- **Optional**

Optional data to append to the end of the calldata. Useful for adding a "domain" tag.

### JSON-RPC Method

Underlying JSON-RPC method used by this action.

Uses [`eth_estimateGas`](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_estimategas) with ABI-encoded data.
